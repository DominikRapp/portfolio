<section aria-labelledby="contact-heading">

    <article>
        <h4>
            {{ t('contact.section.label') }}
        </h4>

        <h2 id="contact-heading">
            {{ t('contact.heading.line1') }} <br />
            {{ t('contact.heading.line2') }}
        </h2>

        <p class="question">
            {{ t('contact.question') }}
        </p>

        <p>
            {{ t('contact.body.intro') }}
        </p>

        <p>
            {{ t('contact.body.cta.prefix') }}
            <span>
                {{ t('contact.body.cta.highlight') }}
            </span>
        </p>
    </article>

    <div>
        <form autocomplete="off" (ngSubmit)="onSubmit(contactForm)" #contactForm="ngForm">
            <div class="input-box" (click)="nameInput.focus()">
                <label for="name">
                    {{ t('contact.label.name') }}
                </label>
                <input #nameInput #nameControl="ngModel" [(ngModel)]="contactData.name" id="name" name="name"
                    type="text" autocomplete="off" required [placeholder]="getNamePlaceholder(nameControl, contactForm)"
                    (focus)="isNameFocused = true" (blur)="isNameFocused = false"
                    [class.input-error]="contactForm.submitted && nameControl.invalid && !isNameFocused && !contactData.name" />
            </div>

            <div class="input-box-email" (click)="emailInput.focus()">
                <label for="email">
                    {{ t('contact.label.email') }}
                </label>

                <input #emailInput #emailControl="ngModel" [(ngModel)]="contactData.email" id="email" name="email"
                    type="email" autocomplete="off" required
                    pattern="^[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9\-]+(?:\.[a-zA-Z0-9\-]+)+$"
                    [placeholder]="getEmailPlaceholder(emailControl, contactForm)" (focus)="isEmailFocused = true"
                    (blur)="isEmailFocused = false"
                    [class.input-error]="contactForm.submitted && emailControl.invalid && !isEmailFocused" />
            </div>
            <p class="field-error email-error"
                [class.email-error-visible]="contactForm.submitted && emailControl.invalid">
                {{ t('contact.placeholder.emailError') }}
            </p>


            <div class="input-box input-box-bottom" (click)="messageInput.focus()">
                <label for="message">
                    {{ t('contact.label.message') }}
                </label>
                <textarea #messageInput #messageControl="ngModel" [(ngModel)]="contactData.message" id="message"
                    name="message" required [placeholder]="getMessagePlaceholder(messageControl, contactForm)"
                    (focus)="isMessageFocused = true" (blur)="isMessageFocused = false"
                    [class.input-error]="contactForm.submitted && messageControl.invalid && !isMessageFocused && !contactData.message">
                </textarea>
            </div>

            <div class="privacy-consent">
                <input type="checkbox" id="privacyConsent" name="privacyConsent" [(ngModel)]="privacyConsent"
                    #privacyConsentControl="ngModel" required [attr.aria-label]="t('contact.privacy.checkboxLabel')" />
                <p>
                    {{ t('contact.privacy.text.beforeLink') }}
                    <a routerLink="privacy-policy" rel="noopener noreferrer">
                        {{ t('contact.privacy.linkLabel') }}
                    </a>
                    {{ t('contact.privacy.text.afterLink') }}
                </p>
            </div>

            <p class="field-error privacy-error"
                [class.privacy-error-visible]="contactForm.submitted && privacyConsentControl.invalid">
                {{ t('contact.privacy.error') }}
            </p>

            <div class="btn-help">
                <button type="submit" [disabled]="isSubmitting || cooldownRemaining > 0">
                    {{ t('contact.button.submit') }}
                </button>
            </div>

            <p class="field-error cooldown-message" *ngIf="cooldownRemaining > 0">
                {{ t('contact.cooldown.prefix') }}
                {{ cooldownRemaining }}
                {{ t('contact.cooldown.suffix') }}
            </p>
        </form>
    </div>
</section>

<div class="contact-toast contact-toast--success" *ngIf="successVisible" role="status" aria-live="polite">
    {{ t('contact.feedback.success') }}
</div>